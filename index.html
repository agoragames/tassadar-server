<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>tassadar-server by agoragames</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/agoragames/tassadar-server">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/agoragames/tassadar-server/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/agoragames/tassadar-server/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>tassadar-server</h1>
          <p>Hassle-free Starcraft II replay parsing</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/agoragames">agoragames</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <p>This simple rack-based web service uses the pure-ruby <a href="https://github.com/agoragames/tassadar">Tassadar</a> library
to parse uploaded Starcraft II replay files and send a JSON response.</p>

<p>This service is designed to enable Tassadar in polyglot or browser-based projects where Ruby may not be the significant language.</p>

<h1>As a service</h1>

<p>For your convenience, a public instance is provided, limited to 100 requests/hr. Visit <a href="https://www.mashape.com/logankoester/tassadar">tassadar on Mashape</a> to grab an API key and the SDK for your language, then enjoy!</p>

<h1>Run your own</h1>

<pre><code>$ gem install tassadar-server
</code></pre>

<h2>Usage</h2>

<h4>Options</h4>

<p>The server can be configured using the following environment variables:</p>

<table>
<tr>
<th><strong>Option</strong></th>
<th><strong>Description</strong></th>
<th><strong>Details</strong></th>
</tr>
<tr>
<td>THROTTLE</td>
<td>Allowed requests per hour</td>
<td>for each user</td>
</tr>
<tr>
<td>REDIS_URL</td>
<td>Redis server</td>
<td>required if THROTTLE is enabled</td>
</tr>
<tr>
<td>WHITELIST</td>
<td>Comma-separated list of allowed IP addresses</td>
<td>Optional</td>
</tr>
<tr>
<td>USER_HEADER</td>
<td>Header containing unique user id</td>
<td>defaults to IP address if not set</td>
</tr>
</table><h4>Start the server</h4>

<pre><code>$ rackup ./config.ru
</code></pre>

<p>You can also mount tassadar-server into a Rails 3 application, or use unicorn to set up a cluster of workers for increased load.</p>

<h4>Parse a replay</h4>

<pre><code>$ http -f POST http://localhost:9292/sc2/replay file@spec/replays/delta_quadrant.SC2Replay

POST /sc2/replay HTTP/1.1
Host: localhost:9292
Content-Type: multipart/form-data; boundary=cd85979359044d7cac045667d
cf591c3
Accept-Encoding: gzip, deflate, compress
Accept: */*
Content-Type: application/json
Content-Length: 633
Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
Date: Thu, 03 Jan 2013 01:32:21 GMT
Connection: Keep-Alive
</code></pre>

<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">"replay"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"game"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"category"</span><span class="o">:</span> <span class="s2">"Ladder"</span><span class="p">,</span>
            <span class="s2">"map"</span><span class="o">:</span> <span class="s2">"Delta Quadrant"</span><span class="p">,</span>
            <span class="s2">"speed"</span><span class="o">:</span> <span class="s2">"Faster"</span><span class="p">,</span>
            <span class="s2">"time"</span><span class="o">:</span> <span class="s2">"2011-07-05 18:01:08 -0400"</span><span class="p">,</span>
            <span class="s2">"type"</span><span class="o">:</span> <span class="s2">"1v1"</span><span class="p">,</span>
            <span class="s2">"winner"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"actual_race"</span><span class="o">:</span> <span class="s2">"Zerg"</span><span class="p">,</span>
                <span class="s2">"chosen_race"</span><span class="o">:</span> <span class="s2">"Zerg"</span><span class="p">,</span>
                <span class="s2">"handicap"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s2">"id"</span><span class="o">:</span> <span class="mi">2569192</span><span class="p">,</span>
                <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"redgar"</span><span class="p">,</span>
                <span class="s2">"won"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s2">"color"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"alpha"</span><span class="o">:</span> <span class="mi">255</span><span class="p">,</span>
                    <span class="s2">"red"</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s2">"green"</span><span class="o">:</span> <span class="mi">66</span><span class="p">,</span>
                    <span class="s2">"blue"</span><span class="o">:</span> <span class="mi">255</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"players"</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">"player"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"actual_race"</span><span class="o">:</span> <span class="s2">"Terran"</span><span class="p">,</span>
                    <span class="s2">"chosen_race"</span><span class="o">:</span> <span class="s2">"Terran"</span><span class="p">,</span>
                    <span class="s2">"handicap"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="s2">"id"</span><span class="o">:</span> <span class="mi">1918894</span><span class="p">,</span>
                    <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"guitsaru"</span><span class="p">,</span>
                    <span class="s2">"won"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">"color"</span><span class="o">:</span> <span class="p">{</span>
                        <span class="s2">"alpha"</span><span class="o">:</span> <span class="mi">255</span><span class="p">,</span>
                        <span class="s2">"red"</span><span class="o">:</span> <span class="mi">180</span><span class="p">,</span>
                        <span class="s2">"green"</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
                        <span class="s2">"blue"</span><span class="o">:</span> <span class="mi">30</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">"player"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"actual_race"</span><span class="o">:</span> <span class="s2">"Zerg"</span><span class="p">,</span>
                    <span class="s2">"chosen_race"</span><span class="o">:</span> <span class="s2">"Zerg"</span><span class="p">,</span>
                    <span class="s2">"handicap"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="s2">"id"</span><span class="o">:</span> <span class="mi">2569192</span><span class="p">,</span>
                    <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"redgar"</span><span class="p">,</span>
                    <span class="s2">"won"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">"color"</span><span class="o">:</span> <span class="p">{</span>
                        <span class="s2">"alpha"</span><span class="o">:</span> <span class="mi">255</span><span class="p">,</span>
                        <span class="s2">"red"</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s2">"green"</span><span class="o">:</span> <span class="mi">66</span><span class="p">,</span>
                        <span class="s2">"blue"</span><span class="o">:</span> <span class="mi">255</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>